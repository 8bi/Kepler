/*
	modulo che genera un finestra modale con un elenco di elementi generici: places o utenti conversazioni
*/

//TODO rinomina in modalList

//TODO inserire opzione per mostrare colonne invece di righe

Climbo.pageList = {

	show: function(options) {

		var page$ = $('#pageList'),
			header$ = page$.find('.header-item'),
			list$ = page$.find('.list-items'),
			opts = _.defaults(options, {
				header: null,
				template: null,
				items: [],
				sortby: null,
				desc: false,
				className: ''
			});
		
		list$.empty();
		header$.empty();
		page$.attr('class','container '+opts.className);

		if(opts.sortby)
			opts.items = _.sortBy(opts.items, function(item) {
							return item ? item[opts.sortby] : 0;
						});
		if(opts.desc)
			opts.items.reverse();
		
		if(opts.header)
			UI.insert( UI.renderWithData(opts.header.tmpl, opts.header), header$.get(0) );

		_.each(opts.items, function(item) {
			UI.insert(
				UI.renderWithData(Template.pageListItem,
				_.extend(item, {tmpl: opts.template ? Template[opts.template] : item.tmpl })
			), list$.get(0) );
		});
	},

	hide: function() {
		var page$ = $('#pageList'),
			header$ = page$.find('.first-items'),
			list$ = page$.find('.list-items');

		page$.modal('hide');
		page$.attr('class','container ');
		list$.empty();
	}
};

